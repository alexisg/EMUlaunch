//LAUNCHER - this simply accepts input from buttons below and launches the buildlist function with appropriate pickfunction launchconsole(q) {	_global.pick = q;	buildlist();}//Pereference button code. btn_reset.tween("_alpha",10,6,"easeOut",4);btn_reset.onRelease = function() {	_global.reset = "yes";	_root.gotoAndStop("config");}btn_reset.onRollOver = function() {	this._alpha = 100;	mApplication.showMouse(true);}btn_reset.onRollOut = function() {	this._alpha = 20;}//Main key listerner. //Standard crap, case=32 means space bar and so on.Key.addListener(_root);	_root.onKeyDown = function() {		var item = tree.selectedItem;		var romname = item.attributes.rom;		var romdir = item.attributes.dir;		var rom = romdir + "/" + romname;		var isdir = item.attributes.type;			switch (Key.getCode()) {				case 32 :			//When you press the space bar, if the item selected is not a directory, launch the fucker. 			if (isdir != true) { 				mWindow.setZOrder("STANDARD");				launchsound.start();				mWindow.setFrameRate(1);												if ( pick == 15){									if ( active_sdl == "true" ) {						mamerom = rom.replace(' ', '\\\\ ');						mameromdir = romdir.replace(' ', '\\\\ ');						sdlpathnew = sdlpath.replace(' ', '\\\\ ');						mApplication.trace("do shell script \"" + sdlpathnew + "   " + mamerom +   " -rompath " + mameromdir + "\"");						mSystem.runAppleScript("do shell script \"" + sdlpathnew + "   " + mamerom +   " -rompath " + mameromdir + "\"");					} else if (active_mameosx =="true") {						mamerom = romname.replace('.zip', '');						mameromdir = romdir.replace(' ', '\\\\ ');						mameosxpathnew = mameosxpath.replace(' ', '\\\\ ');						mApplication.trace("do shell script \"" + mameosxpathnew + "/Contents/MacOS/MAME\\\\ OS\\\\ X  -RomPath " + mameromdir  +"  -Game  " + mamerom +   "\"");						mSystem.runAppleScript("do shell script \"" + mameosxpathnew + "/Contents/MacOS/MAME\\\\ OS\\\\ X  -RomPath " + mameromdir  +"  -Game  " + mamerom +   "\"");											//ELSE if you are still old school and use MacMAME, open with MacMAME cause it runs galaga just fine					} else {							mSystem.openDocument(rom); 					};								} else {						mSystem.openDocument(rom); 				};								mApplication.trace("EMUlaunch!: " + rom);							} else {				if (tree.getIsOpen(tree.selectedItem)) {				tree.setIsOpen(tree.selectedItem, false, true);				} else { 				tree.setIsOpen(tree.selectedItem, true, true);				}			}			break;		case Key.ENTER :			if (isdir != true) { 				mWindow.setZOrder("STANDARD");				launchsound.start();				mWindow.setFrameRate(1);												if ( pick == 15){									if ( active_sdl == "true" ) {						mamerom = rom.replace(' ', '\\\\ ');						mameromdir = romdir.replace(' ', '\\\\ ');						sdlpathnew = sdlpath.replace(' ', '\\\\ ');						mApplication.trace("do shell script \"" + sdlpathnew + "   " + mamerom +   " -rompath " + mameromdir +"\"");						mSystem.runAppleScript("do shell script \"" + sdlpathnew + "   " + mamerom +   " -rompath " + mameromdir + "\"");											} else if (active_mameosx =="true") {								mamerom = romname.replace('.zip', '');								mameromdir = romdir.replace(' ', '\\\\ ');								mameosxpathnew = mameosxpath.replace(' ', '\\\\ ');								mApplication.trace("do shell script \"" + mameosxpathnew + "/Contents/MacOS/MAME\\\\ OS\\\\ X  -RomPath " + mameromdir  +"  -Game  " + mamerom +   "\"");								mSystem.runAppleScript("do shell script \"" + mameosxpathnew + "/Contents/MacOS/MAME\\\\ OS\\\\ X  -RomPath " + mameromdir  +"  -Game  " + mamerom +   "\"");							//ELSE if you are still old school and use MacMAME, open with MacMAME cause it runs galaga just fine							} else {							mSystem.openDocument(rom); 					};								} else {						mSystem.openDocument(rom); 				};								mApplication.trace("EMUlaunch!: " + rom);							} else {				if (tree.getIsOpen(tree.selectedItem)) {				tree.setIsOpen(tree.selectedItem, false, true);				} else { 				tree.setIsOpen(tree.selectedItem, true, true);				}			}			break;						case Key.LEFT :			_global.lastpick = pick;			if (pick == 1) {				_global.pick = maxconsoles;			} else {				_global.pick = pick-1;			}			turnoffkeys();			launchconsole(pick);			listsound.stop();			break;							case 219 :			_global.lastpick = pick;			if (pick == 1) {				_global.pick = maxconsoles;			} else {				_global.pick = pick-1;			}			turnoffkeys();			launchconsole(pick);			break;							case Key.RIGHT :			_global.lastpick = pick;			if (pick == maxconsoles) {				_global.pick = 1;			} else {				_global.pick = pick+1;			}			turnoffkeys();			launchconsole(pick);			if (tree.getIsOpen(tree.selectedItem)) {				tree.setIsOpen(tree.selectedItem, false, false);				} else { 				tree.setIsOpen(tree.selectedItem, false, false);				}		break;						case 221 :			_global.lastpick = pick;			if (pick == maxconsoles) {				_global.pick = 1;			} else {				_global.pick = pick+1;			}			turnoffkeys();			launchconsole(pick);			break;								case 49 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(1);			break;								case 50 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(2);			break;					case 51 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(3);			break;					case 52 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(4);			break;				case 53 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(5);			break;		case 54 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(6);			break;		case 55 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(7);			break;		case 56 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(8);			break;		case 57 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(9);			break;		case 48 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(10);			break;					case 189 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(11);			break;					case 187 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(12);			break;					case 220 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(13);			break;					case 186 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(14);			break;		case 222 :			_global.lastpick = pick;			turnoffkeys();			launchconsole(15);			break;		}	};